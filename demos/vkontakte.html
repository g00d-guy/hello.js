<!DOCTYPE html>
<script src="../src/hello.js"></script>
<script src="../src/hello.then.js"></script>
<script src="../src/modules/vkontakte.js"></script>

<title>hello( vkontakte )</title>
<h1>hello( vkontakte )</h1>

<button id='login' onclick="login('vkontakte');">VKontakte</button><br>
<div id="result"></div>
<script class="pre">
function login(network){
  var vkontakte = hello(network);
  vkontakte.login({
    force: true,
    display:'popup',
    state: 'klyhb79gb78gbi',
    scope:'email,offline_access',
    response_type:'code',
    oauth_proxy: 'http://bonustab.local:8080/login/proxy'
  }, function() {console.log('logged in!')}).then(function(r) {
    console.dir(vkontakte.getAuthResponse());
    vkontakte.api('me').then(function(p) {
      document.getElementById('result').innerHTML = "<br><img src='"+ p.thumbnail + "' width=100/><br>Connected to "+ network+" as " + p.name;
    });
  }, function(e) {
    document.getElementById('result').innerHTML = "Error: " + e.error.message;
  });
}
</script>

<script class="pre">
  hello.init({
    'vkontakte': '3422567'
  });
</script>